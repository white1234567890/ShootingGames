#pragma once
#include "BoxClass.h"
#include "InputClass.h"
#include <string>

//使用クラス宣言
class ShoulderPartsClass;
class BackPartsClass;
class HipPartsClass;
class CircleClass;

class PlayerClass :
	public BoxClass , public InputClass
{
private:
	ShoulderPartsClass *m_Pointer_to_Shoulder_L;	//左肩へのポインタ
	ShoulderPartsClass *m_Pointer_to_Shoulder_R;	//右肩へのポインタ
	BackPartsClass *m_Pointer_to_Back;	//背中へのポインタ
	HipPartsClass *m_Pointer_to_Hip;	//腰へのポインタ
	double m_PLAYER_X_SPEED;	//横の速さ
	double m_PLAYER_Y_SPEED;	//縦の速さ

	CircleClass m_PlayerCollider;	//当たり判定

	bool m_ShotFlag;	//弾を撃つ

	//////////////////////////////////////////////////////////////////////////////
	//プレイヤーの情報をロード
	//引数:
	//	file_name:ロードするファイル名
	//////////////////////////////////////////////////////////////////////////////
	bool LoadPlayerStatus(int player_type);

	//////////////////////////////////////////////////////////////////////////////
	//入力キーチェック
	//////////////////////////////////////////////////////////////////////////////
	void CheckInput();

	//////////////////////////////////////////////////////////////////////////////
	//プレイヤーが画面外に行かない処理
	//////////////////////////////////////////////////////////////////////////////
	void PlayerCanNotOverScreen();

	//////////////////////////////////////////////////////////////////////////////
	//移動処理
	//////////////////////////////////////////////////////////////////////////////
	void MoveObject();
	
	//////////////////////////////////////////////////////////////////////////////
	//概略:
	//	子オブジェクトの初期設定
	//引数:
	//	shoulder_l_type
	//	shoulder_r_type
	//	back_type
	//	hip_type
	//戻り値:
	//	true:初期化に成功
	//	false:いずれかのデータのロードが失敗した
	//////////////////////////////////////////////////////////////////////////////
	bool InitializeChild(int shoulder_l_type , int shoulder_r_type , int back_type , int hip_type);

	//////////////////////////////////////////////////////////////////////////////
	//子の更新
	//////////////////////////////////////////////////////////////////////////////
	bool UpdateChild();

	//////////////////////////////////////////////////////////////////////////////
	//子の描画
	//////////////////////////////////////////////////////////////////////////////
	void RenderChild();

public:

	PlayerClass(void);
	~PlayerClass(void);

	//////////////////////////////////////////////////////////////////////////////
	//概略:
	//	プレイヤーの速度を設定する
	//引数:
	//	x:横軸速度
	//	y:縦軸速度
	//////////////////////////////////////////////////////////////////////////////
	void SetPlayerSpeed(double x , double y);

	//////////////////////////////////////////////////////////////////////////////
	//概略:
	//	初期化
	//引数:
	//	player_type:プレイヤーキャラクターのタイプ
	//	*shoulder_l:左肩パーツへのポインタ
	//	shoulder_l_type:左肩パーツのタイプ
	//	*shoulder_r:右肩パーツへのポインタ
	//	shoulder_r_type:右肩パーツのタイプ
	//	*back:背中パーツへのポインタ
	//	back_type:背中パーツのタイプ
	//	*hip:腰パーツへのポインタ
	//	hip_type:腰パーツのタイプ
	//	flag:フラグ
	//戻り値:
	//	true:初期化に成功
	//	false:いずれかのファイルのロードが失敗している
	//////////////////////////////////////////////////////////////////////////////
	bool Initialize(int player_type ,
		ShoulderPartsClass* shoulder_l , int shoulder_l_type ,
		ShoulderPartsClass* shoulder_r , int shoulder_r_type ,
		BackPartsClass* back , int back_type ,
		HipPartsClass* hip , int hip_type ,
		bool flag = true);

	//////////////////////////////////////////////////////////////////////////////
	//更新
	//////////////////////////////////////////////////////////////////////////////
	bool Update();

	//////////////////////////////////////////////////////////////////////////////
	//概略:
	//	描画
	//////////////////////////////////////////////////////////////////////////////
	void Render();
};