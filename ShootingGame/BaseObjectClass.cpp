#include "BaseObjectClass.h"
#include "BoxClass.h"
#include "CircleClass.h"
#include "system.h"

//////////////////////////////////////////////////////////////////////////////
//コンストラクタ
//////////////////////////////////////////////////////////////////////////////
BaseObjectClass::BaseObjectClass(void)
{
	//m_Position = POSITION();
	//m_Velocity = VELOCITY();
	//m_Accelaration = ACCELARATION();
	m_Angle = 0;
	m_AngleVelocity = 0;
}

//////////////////////////////////////////////////////////////////////////////
//デストラクタ
//////////////////////////////////////////////////////////////////////////////
BaseObjectClass::~BaseObjectClass(void)
{
}

//////////////////////////////////////////////////////////////////////////////
//protected関数
//////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////
//概略:
//	物体を移動させる
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::MoveObject()
{
	m_Position.m_Vector += m_Velocity.m_Vector;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	物体を移動させる（重力を加算する）
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::MoveObject(bool& grounded_flag)
{
	GetGravity();
	m_Position.m_Vector += m_Velocity.m_Vector + m_GravityVelocity;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	物体を加速させる
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::AccelObject()
{
	m_Velocity.m_Vector += m_Accelaration.m_Vector;
}

void BaseObjectClass::RotateObject(double angle)
{
}


//////////////////////////////////////////////////////////////////////////////
//概略:
//	反発計算
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::ObjectBound()
{
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	反発計算（四角）
//引数:
//	*obj:当たった物体（四角）
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::ObjectBound(BoxClass *obj)
{
	THREE_DIMENSION_VECTOR CollidedEdge = obj->GetVertex(0).m_Vector - obj->GetVertex(obj->GetVertexSize() - 1).m_Vector;	//当たっている辺を調べる
	THREE_DIMENSION_VECTOR NomalVector = obj->GetPosition().m_Vector - (obj->GetVertex(obj->GetVertexSize() - 1).m_Vector + CollidedEdge * 0.5);	//四角形の法線ベクトル
	NomalVector.Nomalize();

	for(int i = 0 ; i < obj->GetVertexSize() - 2 ; i++)
	{
		CollidedEdge = obj->GetVertex(i).m_Vector - obj->GetVertex(i + 1).m_Vector;
	}

}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	反発計算（円）
//引数:
//	*obj:当たった物体（円）
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::ObjectoBound(CircleClass *obj)
{

}

//////////////////////////////////////////////////////////////////////////////
//public関数
//////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////
//概略:
//	中心座標を取得する
//戻り値:
//　m_Position:中心座標
//////////////////////////////////////////////////////////////////////////////
POSITION BaseObjectClass::GetPosition()
{
	return m_Position;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	速度を取得する
//戻り値:
//	m_Velocity:速度
//////////////////////////////////////////////////////////////////////////////
VELOCITY BaseObjectClass::GetVelocity()
{
	return m_Velocity;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	加速度を取得する
//戻り値:
//	m_Accelaration:加速度
//////////////////////////////////////////////////////////////////////////////
ACCELARATION BaseObjectClass::GetAccelaration()
{
	return m_Accelaration;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	角度を取得する
//戻り値:
//　m_Angle:角度
//////////////////////////////////////////////////////////////////////////////
double BaseObjectClass::GetAngle()
{
	return m_Angle;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	角速度を取得する
//戻り値:
//	m_AngleVelocity:角速度
//////////////////////////////////////////////////////////////////////////////
double BaseObjectClass::GetAngleVelocity()
{
	return m_AngleVelocity;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	フラグを取得する
//戻り値
//	m_Flag:フラグ
//////////////////////////////////////////////////////////////////////////////
bool BaseObjectClass::GetFlag()
{
	return m_Flag;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	中心座標を代入する
//引数:
//	*position:位置
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::SetPosition(THREE_DIMENSION_VECTOR* position)
{
	m_Position.m_Vector = *position;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	速度を代入する
//引数:
//	*velocity:速度
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::SetVelocity(THREE_DIMENSION_VECTOR* velocity)
{
	m_Velocity.m_Vector = *velocity;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	加速度を代入する
//引数:
//	*accelaration:加速度
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::SetAccelaration(THREE_DIMENSION_VECTOR* accelaration)
{
	m_Accelaration.m_Vector = *accelaration;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	フラグを代入する
//引数:
//	flag:フラグ
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::SetFlag(bool flag)
{
	m_Flag = flag;
}
//////////////////////////////////////////////////////////////////////////////
//概略:
//	更新（純粋仮想関数）
//////////////////////////////////////////////////////////////////////////////
bool BaseObjectClass::Update()
{
	return true;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	初期化（純粋仮想関数）
//////////////////////////////////////////////////////////////////////////////
bool BaseObjectClass::Initialize()
{
	return true;
}

//////////////////////////////////////////////////////////////////////////////
//概略:
//	描画（純粋仮想関数）
//////////////////////////////////////////////////////////////////////////////
void BaseObjectClass::Render()
{
}